Got it â€” this explains **why your Kubernetes node stays NotReady** and **Calico cannot initialize**.

You are running:

```
containerd v2.2.0
```

But **Kubernetes v1.34.x requires containerd >= 1.7.x** (and 2.x is *not yet supported* by kubelet).

Because of this mismatch:

âœ” kubelet cannot talk to containerd
âœ” CNI (Calico) init container fails
âœ” Node reports:

```
NetworkPluginNotReady: cni plugin not initialized
```

**â†’ This is the root cause.**

---

# âœ… **You MUST install a supported containerd version**

For **Kubernetes 1.29â€“1.34**, the supported versions are:

| Kubernetes Version | Supported containerd             |
| ------------------ | -------------------------------- |
| 1.29 â€“ 1.34        | **1.6.x / 1.7.x** (prefer 1.7.x) |

ðŸ“Œ **containerd 2.x is NOT supported by Kubernetes yet.**

---

# ðŸ”§ **Fix = uninstall containerd 2.2.0 and install containerd 1.7.x**

### 1. Remove existing containerd

```bash
sudo systemctl stop containerd
sudo dnf remove -y containerd.io
```

### 2. Install containerd 1.7 (recommended for K8s 1.34)

Official RPM (Oracle Linux 9 / RHEL9 compatible):

```bash
sudo dnf install -y \
 https://download.docker.com/linux/rhel/9/x86_64/stable/Packages/containerd.io-1.7.17-3.1.el9.x86_64.rpm
```

Verify:

```bash
containerd --version
```

You should see something like:

```
containerd containerd.io 1.7.17
```

---

# 3. Configure containerd for Kubernetes

```bash
sudo mkdir -p /etc/containerd
containerd config default | sudo tee /etc/containerd/config.toml
```

Modify config so that systemd cgroups are enabled:

```bash
sudo sed -i 's/SystemdCgroup = false/SystemdCgroup = true/g' /etc/containerd/config.toml
```

Restart:

```bash
sudo systemctl restart containerd
sudo systemctl enable containerd
```

---

# 4. Restart kubelet

```bash
sudo systemctl restart kubelet
```

Within 30â€“60 sec:

```bash
kubectl get nodes
```

You should see:

```
eqvlwso2apsit15   Ready   control-plane   ...
```

---

# 5. Fix CNI (Calico) after containerd is fixed

Reinstall Calico to ensure CNI config is correct:

```bash
kubectl delete -f https://docs.tigera.io/calico/latest/manifests/calico.yaml --ignore-not-found
kubectl apply -f https://docs.tigera.io/calico/latest/manifests/calico.yaml
```

Then:

```bash
kubectl -n kube-system get pods -w
```

Calico should run normally.

---

# 6. Install crictl (recommended)

```bash
VERSION="v1.30.0"
wget https://github.com/kubernetes-sigs/cri-tools/releases/download/$VERSION/crictl-$VERSION-linux-amd64.tar.gz
sudo tar zxvf crictl-$VERSION-linux-amd64.tar.gz -C /usr/local/bin
```

Create config:

```bash
sudo tee /etc/crictl.yaml <<EOF
runtime-endpoint: unix:///run/containerd/containerd.sock
EOF
```

Test:

```bash
crictl info
```

---

# ðŸŽ‰ After doing the above:

âœ” Node becomes **Ready**
âœ” Calico initializes correctly
âœ” CoreDNS schedules
âœ” Cluster becomes fully functional

---

# If you want â€” I can provide:

âœ… A complete reinstall script
âœ… A validated containerd version link for OL9
âœ… A hardened Kubernetes setup for Oracle Linux 9

Just tell me.
