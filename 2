You're seeing a classic single-node / fresh-cluster problem: the node is `NotReady` because the CNI never finished initializing (`NetworkPluginNotReady: cni plugin not initialized`), Calico pods are `Init:Error` / `Pending`, and that prevents control-plane/user pods (like CoreDNS) from scheduling. Below I give a focused, ordered troubleshooting + fix runbook you can execute now (commands + why) and links to further reading.

---

# TL;DR (what will fix it 95% of the time)

1. Install / fix the CNI (Calico) properly (apply the correct Calico manifest or operator for your Kubernetes version). Calico v3.31+ is tested with K8s 1.34. ([docs.tigera.io][1])
2. Make sure node can pull images and the container runtime is healthy (containerd). Check `crictl`/`journalctl`/`kubectl logs` to find why calico init container failed. Common causes: missing kernel module `br_netfilter`, `net.bridge.bridge-nf_call_iptables` not set, CNI binaries absent in `/opt/cni/bin`, or image-pull/network/proxy problems. ([Stack Overflow][2])

---

# Step-by-step (run these on the node / cluster control plane)

## 1) Quick view (what’s failing)

```bash
kubectl get pods -n kube-system -o wide
kubectl get nodes -o wide
```

## 2) Inspect the calico pod that is `Init:Error`

Replace the pod name with the actual pod name you have:

```bash
kubectl -n kube-system describe pod calico-node-mtpg8
kubectl -n kube-system logs calico-node-mtpg8 -c calico-node      # main container
kubectl -n kube-system logs calico-node-mtpg8 -c calico-node -p   # previous, if restarted
kubectl -n kube-system logs calico-kube-controllers-6ffb5df975-fqfvt
```

Look for errors like missing files, permission denied, failed to create interface, or image-pull errors. If logs show “No networks found in /etc/cni/net.d” or similar, the CNI config was never written. ([Stack Overflow][2])

## 3) Check container runtime & CNI filesystem

```bash
# containerd status
sudo systemctl status containerd
sudo journalctl -u containerd --no-pager -n 200

# kubelet logs (why it reports NetworkPluginNotReady)
sudo journalctl -u kubelet --no-pager -n 200

# show CNI config and plugin locations
ls -la /etc/cni/net.d
ls -la /opt/cni/bin
```

If `/opt/cni/bin` is empty or missing the plugins, CNI won't initialize. If there are image-pull errors in calico logs, ensure network/proxy/registry access.

## 4) Kernel / sysctl checks (very common cause)

Calico (and other CNIs) expects bridged traffic to be visible to iptables. On many systems you must enable br_netfilter and set net.bridge.* sysctls:

```bash
# quick check/apply (temporary)
sudo modprobe br_netfilter
sudo sysctl -w net.bridge.bridge-nf_call_iptables=1
sudo sysctl -w net.bridge.bridge-nf_call_ip6tables=1

# make persistent
echo 'br_netfilter' | sudo tee /etc/modules-load.d/br_netfilter.conf
cat <<EOF | sudo tee /etc/sysctl.d/99-k8s.conf
net.bridge.bridge-nf-call-iptables  = 1
net.bridge.bridge-nf-call-ip6tables = 1
EOF
sudo sysctl --system
```

If `modprobe br_netfilter` fails or sysctl doesn't exist, that explains CNI errors. ([Kubernetes][3])

## 5) If CNI not installed or corrupt — (re)install Calico

Use the official Calico quickstart / manifest. For kubeadm/self-managed, Project Calico provides a manifest/installer. Example:

```bash
# recommended: use the official URL from Tigera
kubectl apply -f https://docs.tigera.io/calico/latest/manifests/calico.yaml
```

(Or install using the tigera-operator / Helm; choose the method you prefer.) Calico releases have compatibility information; Calico v3.31 supports K8s 1.34 (so pick a tested release). After apply, watch the calico pods start:

```bash
kubectl -n kube-system rollout status daemonset/calico-node
kubectl -n kube-system get pods -w
```

If the node still shows `NetworkPluginNotReady`, check calico-node logs again. ([docs.tigera.io][1])

> Note: If you're on an airgapped/private registry environment you must edit the manifest to point images to your registry.

## 6) Check image pulls / networking / proxies

If calico init fails pulling images, fix credentials/proxy or preload images:

```bash
# see events for image pull
kubectl -n kube-system describe pod calico-node-mtpg8 | sed -n '/Events:/,$p'

# or on the host, test Docker/Containerd can pull
sudo ctr images pull docker.io/calico/node:<tag>   # or use crictl with your runtime
```

## 7) `invalid capacity 0 on image filesystem` warnings (non-blocking)

You have events `InvalidDiskCapacity invalid capacity 0 on image filesystem`. These are usually warnings logged early at kubelet startup and often harmless; they can often be ignored unless you see disk-related failures. You can search/monitor but they usually don't prevent CNI initialization. ([GitHub][4])

## 8) Optional: Allow scheduling on control-plane (if you want single-node cluster to run system pods)

If you intentionally want system pods scheduled on the control-plane (single-node clusters often do), remove the control-plane taint so regular pods can run there (but Calico/CoreDNS should be tolerating it anyway). To remove:

```bash
kubectl taint nodes eqvlwso2apsit15 node-role.kubernetes.io/control-plane:NoSchedule-
# or remove for all nodes:
kubectl taint nodes --all node-role.kubernetes.io/control-plane:NoSchedule-
```

Use this only if you understand scheduling implications.

---

# Typical root causes I see from your output

* Calico CNI was not successfully installed or its init container errored → kubelet reports network plugin not initialized and node becomes NotReady. (Fix: install Calico correctly and inspect calico-node logs.) ([docs.tigera.io][1])
* br_netfilter/sysctl not enabled → CNI cannot program iptables rules / network interface → Calico fails. (Fix: `modprobe br_netfilter` + sysctl.) ([Kubernetes][3])
* Image pull / proxy / registry issues or missing CNI binaries in `/opt/cni/bin`. (Fix: make images accessible or preload images and ensure manifest points to correct images.)
* `InvalidDiskCapacity` messages are mostly warnings and not the immediate cause. ([GitHub][4])

---

# If you want, run these commands now and paste the outputs

(you already provided helpful dumps — next helpful outputs:)

```bash
kubectl -n kube-system get pods -o wide
kubectl -n kube-system describe pod calico-node-mtpg8
kubectl -n kube-system logs calico-node-mtpg8 -c calico-node
sudo journalctl -u kubelet -n 200 --no-pager
ls -la /opt/cni/bin /etc/cni/net.d
sudo systemctl status containerd
```

If you paste the `calico-node` logs and `kubelet` journal lines that show the error, I will read them and tell you the exact error and the next action. (If you prefer, apply the Calico manifest first with `kubectl apply -f https://docs.tigera.io/calico/latest/manifests/calico.yaml` and then paste the logs if anything still fails.)

---

# References / reading

* Calico quickstart and manifests (install instructions & compatibility). ([docs.tigera.io][1])
* Calico compatibility (Calico v3.31 tested against K8s 1.34). ([docs.tigera.io][5])
* Common CNI “No networks found in /etc/cni/net.d” / `cni plugin not initialized` troubleshooting. ([Stack Overflow][2])
* `invalid capacity 0 on image filesystem` explanation / common harmless warning. ([GitHub][4])

---

If you want, paste the `calico-node` logs and `kubelet` journal output you get after trying the sysctl + reapply steps and I’ll point to the exact failing line and the precise fix.

[1]: https://docs.tigera.io/calico/latest/getting-started/kubernetes/quickstart?utm_source=chatgpt.com "Calico quickstart guide"
[2]: https://stackoverflow.com/questions/49112336/container-runtime-network-not-ready-cni-config-uninitialized?utm_source=chatgpt.com "Container runtime network not ready: cni config uninitialized"
[3]: https://kubernetes.io/docs/concepts/extend-kubernetes/compute-storage-net/network-plugins/?utm_source=chatgpt.com "Network Plugins"
[4]: https://github.com/k3s-io/k3s/issues/1857?utm_source=chatgpt.com "invalid capacity 0 on image filesystem warning when ..."
[5]: https://docs.tigera.io/calico/latest/getting-started/kubernetes/requirements?utm_source=chatgpt.com "System requirements for Kubernetes - Calico Documentation"
