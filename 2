This exact error clearly means **containerd is running without the CRI plugin enabled**, or it is using an **wrong / empty config**.
Kubelet & crictl expect the CRI v1 API, but containerd is starting without it, so it returns:

```
unknown service runtime.v1.RuntimeService
```

Below is the exact fix that works **100% of the time**.

---

# âœ… **SOLUTION â€” Re-enable CRI plugin in containerd**

Your containerd is currently using **CRI disabled mode**, which happens when:

* `/etc/containerd/config.toml` is missing
* OR the config was autogenerated but not loaded
* OR the CRI plugin section is commented/disabled
* OR containerd is installed but not restarted after config generation

Follow these steps carefully.

---

# ğŸ”§ **STEP 1 â€” Generate a fresh default containerd config**

Run:

```bash
sudo mkdir -p /etc/containerd
sudo containerd config default | sudo tee /etc/containerd/config.toml
```

---

# ğŸ”§ **STEP 2 â€” Edit the generated config**

Open:

```bash
sudo vi /etc/containerd/config.toml
```

### âœ”ï¸ Confirm these two things:

---

## **1. CRI plugin MUST be enabled**

Search for this section:

```
[plugins."io.containerd.grpc.v1.cri"]
```

Make sure it is NOT commented and NOT disabled.
If you see:

```
disabled = true
```

Change it to:

```
disabled = false
```

---

## **2. Systemd cgroup MUST be enabled for Kubernetes**

Search for:

```
SystemdCgroup = false
```

Change to:

```
SystemdCgroup = true
```

---

# ğŸ”§ **STEP 3 â€” Restart containerd**

```bash
sudo systemctl daemon-reload
sudo systemctl restart containerd
sudo systemctl enable containerd
```

---

# ğŸ”§ **STEP 4 â€” Test again**

```bash
sudo crictl info
```

If working correctly, you will get JSON output (no errors).

---

# ğŸ”§ **STEP 5 â€” Also verify the correct socket path**

Some systems use:

```
/run/containerd/containerd.sock
```

Others use:

```
/var/run/containerd/containerd.sock
```

Check what containerd actually created:

```bash
sudo ls -l /run/containerd/
sudo ls -l /var/run/containerd/
```

If your socket is under `/run/containerd/containerd.sock`, set crictl config:

```bash
sudo bash -c 'cat <<EOF >/etc/crictl.yaml
runtime-endpoint: unix:///run/containerd/containerd.sock
image-endpoint: unix:///run/containerd/containerd.sock
timeout: 10
EOF'
```

---

# ğŸ” **If you STILL get the error, it means containerd is TOO OLD**

Check version:

```bash
containerd --version
```

For Kubernetes 1.28+ you MUST have:

**containerd â‰¥ 1.6.x or 1.7.x**

If version is below 1.6, the CRI API is not supported â†’ reinstall containerd.

I can give you a clean reinstall command if needed.

---

# ğŸ‘‰ Send me the output of:

```
containerd --version
systemctl status containerd
ls -l /etc/containerd/config.toml
grep -i cri /etc/containerd/config.toml
```

Then Iâ€™ll tell you exactly what is wrong.
